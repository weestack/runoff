pinid LED1Pin 7;
pinid LED2Pin 8;
pinid LED3Pin 9;

messages {
	Button1Click;
	Button1Release;
	PartyTime(bool state);
}

function setPartyLight(bool state) -> void {
	if(state) {
		turnOn(LED3Pin);
	} else {
		turnOff(LED3Pin);
	}
}

task A() {
	while(true) {
		receive {
		case Button1Click: turnOn(LED2Pin);
		case Button1Release: turnOff(LED2Pin);
		case PartyTime(s): setPartyLight(s);
		}
	}
}

task B() {
	bool party = false;
	while(true) {
		delay(500);
		party = !party;
		send PartyTime(party) to A; # Should give an error since A is not a task id
	}
}

function setup() -> void {
	inputPin(LED1Pin, A, Button1Click, Button1Release);
	outputPin(LED2Pin);
	outputPin(LED3Pin);
}

