pinid LED1Pin = 1P;
pinid LED2Pin = 2P;
pinid LED3Pin = 15P;

pinid LED4Pin = 1P;
pinid LED5Pin = 2P;
pinid LED6Pin = 15P;

messages {
	Button1Click;
	Button1Release;
	PartyTime{bool state};
}

function setPartyLight(bool state) -> void {

	if(state) {
		turnOn(LED3Pin);
	} else {
		turnOff(LED3Pin);
	}
}

task A() {
	int i = 0;
	int j;
	while(true) {
		receive {
		case Button1Click{}: turnOn(LED2Pin);
		case Button1Release{}: turnOff(LED2Pin);
		case PartyTime{s}: setPartyLight(s);
		}
	}
	i >= j;
	i + j;
	j(1);
}

task B(taskid other) {
	bool party = false;
	while(true) {
		delay(500);
		party = !party;
		send PartyTime{party} to other;
		send Button1Click{} to other;
	}
}

function setup() -> void {
	inputPin(LED1Pin, A, Button1Click, Button1Release);
	outputPin(LED2Pin);
	outputPin(LED3Pin);
}
